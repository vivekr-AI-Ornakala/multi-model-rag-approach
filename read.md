

##  How It Works (The Pipeline)

1.  ** Analysis (Gemini 2.5 Flash):** Deconstructs the input image into structured engineering specs (e.g., "Oval Shape", "4-Prong Basket").
2.  ** Image generation(Imagen 4.0):** Uses "Generative Querying" to hallucinate a clean, perfect 3D render of the component, removing noise/shadows from the original input.
3.  ** Retrieval (ChromaDB + OpenCLIP):** Performs a Hybrid Search using the "generated" image (Visual Vector) + the JSON Specs (Metadata Filters).
4.  ** Verification (The Critic Loop):** An Agentic loop that evaluates the top 5 candidates. It compares the retrieved CAD file against the *original* user photo to ensure a stylistic match.
5.  ** Assembly (Rhino 3D):** Auto-generates a Python script (`build_smart.py`) to assemble, align, and scale the selected components inside Rhino 3D.

##  File Structure Overview

| File / Folder | Description |
| :--- | :--- |
| `designer_agent.py` | **The Main Application.** Runs the full AI pipeline (Analysis -> generate -> Search -> Verification). Run this to start. |
| `indexer.py` | **The Database Builder.** Reads images from `cad_library`, converts them to OpenCLIP vectors, and stores them in the local database. |
| `tagger.py` | **Metadata Helper.** A utility script that uses Gemini Vision to automatically tag/label raw CAD files in the library (if needed). |
| `cad_library/` | **The Source Data.** Contains your folders of `.3dm` files and their corresponding `.jpg` renders/screenshots. |
| `jewelry_hybrid_db/` | **The Brain.** The local ChromaDB vector database where embeddings are stored. |
| `build_smart.py` | **The Output.** The script generated by the agent. You run this inside Rhino 3D to build the ring. |
| `master_library.csv` | **The Index.** A spreadsheet linking filenames, categories, descriptions, and file paths. |
| `requirements.txt` | **Dependencies.** A list of all Python libraries required to run the project. |
| `.env` | **Configuration.** (Optional) Stores API keys securely so they aren't hardcoded in scripts. |

## Setup & Installation

### 1. Prerequisites
* Python 3.10 or higher.
* Rhino 3D (Version 7 or 8).
* A Google Cloud API Key (with access to Gemini 2.5 Flash & Imagen 4.0).

### 2. Install Dependencies
Open your terminal in this folder and run:
```bash
pip install -r requirements.txt

### how to run
1.run python tagger.py(already has the output no need to run)
2.run python indexer.py(1 time)
3.run python designer_agent.py(main code)
4.open rhino --> runpythonscript--> select the output .py file to assemble the parts
